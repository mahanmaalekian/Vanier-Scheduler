{% extends "scheduler/layout.html" %}
{% load static %}

{%block body%}
<section class="home">
<h1>hello</h1>
<form id="searchForm" method="post" action="{% url 'search' %}">
    {% csrf_token %}
    <input type="text" name="q" required placeholder="Search..." value="{{ query }}">
    <button class="btn" type="submit">Search</button>
</form>
{% if queried %}
    {% if exams %}
        <div class="">
            <table class="">
                <thead>
                <tr>
                    <th scope="col">Date</th>
                    <th scope="col">Course ID</th>
                    <th scope="col">Section ID</th>
                    <th scope="col">Description</th>
                    <th scope="col">Teacher</th>
                    <th scope="col">Start Time</th>
                    <th scope="col">End Time</th>
                    <th scope="col">Room Number</th>
                    <th scope="col">Row</th>
                    <th scope="col">Actions</th>
                </tr>
                </thead>
                <tbody>
                {% for exam in exams %}
                    <tr>
                        <td>{{ exam.date }} </td>
                        <td>{{ exam.course_id }} </td>
                        <td>{{ exam.section_id }} </td>
                        <td>{{ exam.description }} </td>
                        <td>{{ exam.teacher}} </td>
                        <td>{{ exam.start_time }} </td>
                        <td>{{ exam.end_time}} </td>
                        <td>{{ exam.room_number}} </td>
                        <td>{{ exam.row|default_if_none:""}} </td>
                        <td><button id="{{exam.course_id}} {{exam.section_id}}" onclick="addToCalendar('{{exam.course_id}} {{exam.section_id}}')">Add To Calendar</button></td>
                    </tr>
                {% endfor %}
            </tbody>
            </table>
        </div>
    {% else %}
        <p>No exams found</p>
    {% endif %}
{% endif %}
</section>
{% endblock %}

{% block script %}
    <script src="{% static 'scheduler/search.js' %}"></script>
{% endblock %}